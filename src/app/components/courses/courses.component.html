<!-- FILTRY -->
<div class="filters">
  <!-- Kategorie -->
  <mat-form-field appearance="outline">
    <mat-label>Select category</mat-label>
    <mat-select>
      @for (category of categories(); track category) {
      <mat-option [value]="category.id" (click)="selectCategory(category)">
        {{ category.label }}
      </mat-option>
      }
    </mat-select>
  </mat-form-field>

  <!-- TytuÅ‚ -->
  <mat-form-field appearance="outline" class="search-title">
    <mat-label>Search title</mat-label>
    <input matInput #inputTitle type="text" [matAutocomplete]="auto"
      (keyup)="autocompleteSubject.next(inputTitle.value)" placeholder="Type title" />
    @if (inputTitle.value) {
    <button matSuffix mat-icon-button aria-label="Clear" (click)="inputTitle.value=''; clearFilter()">
      <mat-icon>close</mat-icon>
    </button>
    }
    <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
      @for (title of titleAutocomplete(); track title) {
      <mat-option (click)="selectAutocomplete(title)" [value]="title">
        {{ title }}
      </mat-option>
      }
    </mat-autocomplete>
  </mat-form-field>
</div>

<!-- LISTA KURSÃ“W -->
<div class="courses-grid">
  @for (course of pageCourses().content; track course.id) {
  <mat-card class="course-card mat-elevation-z4">
    <mat-card-header>
      <mat-card-title class="title">{{ course.title }}</mat-card-title>

      <!-- âœ… Dodana kategoria -->
      <div class="category">ðŸ“‚ {{ course.category?.label }}</div>

      <mat-card-subtitle class="date">
        {{ course.startDate | date:'d MMMM y, HH:mm' }} â€“ {{ course.endDate | date:'longDate' }}
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="participants">ðŸ‘¥ Max participants: <strong>{{ course.maxParticipants }}</strong></div>
      <div class="description">{{ course.description }}</div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-flat-button color="primary" (click)="signUpCourse(course.id)">
        Sign Up
      </button>

      <button mat-stroked-button color="accent" (click)="buyCourse(course.id)">
        Buy Course
      </button>

      <a mat-button [routerLink]="['/course', course.id]">
        Details
      </a>

      @if (isOwner(course.id)) {
      <button mat-stroked-button color="warn" (click)="downloadExcelFile(course.id)">
        Excel Report
      </button>
      <button mat-stroked-button color="warn" (click)="downloadCsvFile(course.id)">
        CSV Report
      </button>
      }
    </mat-card-actions>



  </mat-card>

  }
</div>

<!-- PAGINACJA -->
<mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons [length]="pageCourses().totalElements"
  [pageSize]="pageCourses().size" (page)="changePage($event)">
</mat-paginator>